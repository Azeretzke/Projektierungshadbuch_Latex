

\include{config.tex}

%---- title page ----%

\begin{document}

\input{titlepage.tex}


\clearpage

%---- toc, lof, lot, loa, loe, lol ----%

\pagenumbering{Roman}

\input{lists.tex}

%---- text ----%

\setcounter{savepage}{\arabic{page}}
\pagenumbering{arabic}


\section{Aufgabe A}
Die Regelgröße v sei die Position des Antriebs x. Geben Sie den Ausgangsvektor an. 
\begin{lstlisting}[caption = Gegebene Matritzen aus der Aufgabe, captionpos = b, label = lst:example]
A = [0,5.33,0,0,0; 
     0,-1.16,-48,96,0; 
     0,9.71,-1.78,-1.18,-6.5;
     0,-13.2,0.8,1.2,4.4;
     0,0,0,0,-10]

b = [0;0;0;0;118]

s = poly(0, "s")

I = eye(5,5)
\end{lstlisting}
daraus ergibt sich:
\begin{lstlisting}[caption = Ausgangsvektor cT, captionpos = b, label = lst:example]
cT = [1, 0, 0, 0, 0]\end{lstlisting}




\section{Aufgabe B} 
Geben Sie das charakteristische Polynom der Regelstrecke an. Welchen Grad muss dieses haben und warum hat es diesen Grad?


\begin{lstlisting}[caption = charakteristisches Polynom, captionpos = b, label = lst:example]
chPolyA = det(s*I-A)

Ausgabe:
16968.573s +19024.465s^2 +1750.1608s^3 +11.74s^4 +s^5
\end{lstlisting}
Da es sich um eine 5x5 Matrix handelt, ist der zu erwartende Grad des Polynoms 5.

\clearpage
\section{Aufgabe C}
Geben Sie die Pole der Regelstrecke an. Ist die Strecke stabil? Wie erklären Sie sich das aus dem Anlagenbild oben?

\begin{lstlisting}[caption = Pole der Regelstrecke, captionpos = b, label = lst:example]
roots(det(s*I-A))
    
Ausgabe:
-0.3801496 + 41.615759i
-0.3801496 - 41.615759i
-10.       + 0.i       
-0.9797007 + 0.i       
 0.        + 0.i  \end{lstlisting}
Anhand der gefundenen Polstellen, ist festzustellen, dass der gegebene Regelkreis grenzstabil ist. Die Voraussetzung für Stabilität ist, dass die Pole einen negativen Realteil habe und kleiner null sind. Da einer der vorhandenen Pole allerdings im Ursprung liegt, ist dieses System grenzstabil.

\section{Aufgabe D}
\textit{Wie groß ist die Dämpfung des schwach gedämpften Systemanteils?}

\noindent Je größer der Imaginärteil, desto schwächer ist die Dämpfung des Systems. Daher wird für die Berechnung der Dämpfung die Polstelle $-0.3801496 + 41.615759i$ verwendet. 

Die Dämpfung kann berechnet werden aus $\vartheta = cos(\alpha)$. Der Winkel $\alpha$ wird errechnet über die Dreiecksgesetze eines rechtwinkligen Dreiecks und beträgt $\alpha = 89,48^\circ$. Die Resultierende Dämpfung hat demnach den Wert $\vartheta =9,128\cdot10^{-3} $. 
\section{Testabschnitte} 
%{\fontfamily{lmss}\selectfont
%This text uses font typeface lmss
%}\\
%{\fontfamily{qag}\selectfont
%This text uses font typeface qag
%}\\
%{\fontfamily{qcs}\selectfont
%This text uses font typeface qcs
%}\\
%{\fontfamily{cmss}\selectfont
%This text uses font typeface cmss
%}\\
%{\fontfamily{qcs}\selectfont
%This text uses font typeface qcs
%}\\
test test test test test test TEST OH OH IST HIER WIRKLICH EIN FEHLER UNTERLAUFENß Testabschnitte 


\begin{table}[!ht]
    \centering
        \begin{tabular}{ | c | c | c | }
            \hline
            symbol & value & unit \\ \hline            
            $z Na$ & 11 & - \\ \hline      
            $z F$ & 9 & - \\ \hline      
            $Emax Na$ & 0.545 & $[MeV]$ \\ \hline
        \end{tabular}
        \caption{Beispieltabelle \cite{pgfplots}} 
        \label{tab:example} %\label used for referencing the figure in text
    \end{table}

\section{Aufgabe E}
\textit{Prüfen Sie, ob die Regelstrecke steuerbar ist.}

\noindent Damit eine Regelstrecke steuerbar ist, gibt es verschiedene Kriterien zur Überprüfung. Im ersten Schritt muss eine Steuerbarkeitsmatrix erstellt werden und anschließend ihr Rang ermittelt werden. Wenn der Rang gleich der Anzahl der Zeilen bzw. Spalten (in dem Fall n = 5) ist, ist das Kriterium erfüllt.
\begin{lstlisting}[caption = Steuerbarkeitsmatrix, captionpos = b, label = lst:example]
Qs=[b, A*b, A^2*b, A^3*b, A^4*b]
rank(Qs)  

Ausgabe:
5\end{lstlisting}


\section{Aufgabe F}
\textit{Geben Sie die Übertragungsfunktion G(s) der Regelstrecke an.}

\noindent 

\begin{lstlisting}[caption = Übertragungsfunktion G(s), captionpos = b, label = lst:example]
Gs = cT * inv(s*I-A) *b
    
Ausgabe:
                80182.303 +461893.54s                
------------------------------------------------  
16968.573s +19024.465s^2 +1750.1608s^3 +11.74s^4 
\end{lstlisting}



\section{Aufgabe G}
\textit{Es soll ein Zustandsregler nach Polvorgabe entworfen werden. Wo sollten allgemein die Pole des geregelten Systems liegen? Nennen Sie alle Kriterien.}

\noindent Die Pole sollten im schönen Gebiet liegen, Nullstellen kompensieren und nicht zu weit verschoben werden. Das schöne Gebiet hat eine Mindestschnelligkeit, die angibt, wie weit die Pole Mindestens nach links verschoben sein müssen. Außerdem wird das Gebiet begrenzt durch die Dämpfung. Diese wird im $45 ^\circ$ Winkel aufgespannt. Dies entspricht der Position, wenn der Realteil gleich dem Imaginärteil ist. 




\section{Aufgabe H}
\textit{Geben Sie einen Regelvektor nach Polvorgabe an. Die Pole des geschlossenen Kreises sollen sein:
s1 = –15 ; s2 = –15 ; s3,4 = –20 ± j20 ; s5 = –3}

\noindent 
\begin{lstlisting}[caption = Transformation in RNF, captionpos = b, label = lst:example]
Qs_inv=inv(Qs)
qst = Qs_inv(5,:)
Trnf = clean([qst; qst*A; qst*A^2; qst*A^3; qst*A^4], 1e-9)
Arnf = clean(Trnf*A*inv(Trnf), 1e-9)
brnf=clean(Trnf*b, 1e-9)\end{lstlisting}

\begin{lstlisting}[caption = Polvorgabe, captionpos = b, label = lst:example]
w=[-15;-15;-20+20*i;-20-20*i;-3]       
chPoly_w=poly(w,"s","roots")            
co_w=coeff(chPoly_w)'                   
chPoly_Arnf=det(s*I-Arnf)
co_Arnf=coeff(chPoly_Arnf)'
r11 = co_w(1,1) - co_Arnf(1,1)
r12 = co_w(2,1) - co_Arnf(2,1)
r13 = co_w(3,1) - co_Arnf(3,1)
r14 = co_w(4,1) - co_Arnf(4,1)
r15 = co_w(5,1) - co_Arnf(5,1)
rTrnf = [r11, r12, r13, r14, r15]
rT = rTrnf * rTrnf

Ausgabe:
rT = [6.7346532, -1.0261606, 3.1455238, 5.7605231, 0.5191525]
\end{lstlisting}


\section{Aufgabe I}
\textit{Machen Sie die Probe. Wo liegen die Pole des geschlossenen Regelkreises?}


\begin{lstlisting}[caption = Pole des geschlossenen Regelkreises, captionpos = b, label = lst:example]
chPoly_Ages = det(s*I-A+b*rT)
Null_chPoly_Ages = roots(chPoly_Ages)
    
Ausgabe:
chPoly_Ages = 540000 +279000s +39675s^2 +2435s^3 +73s^4 +1s^5

Null_chPoly_Ages = -20. + 20.i      
                   -20. - 20.i      
                   -15. + 0.0002991i
                   -15. - 0.0002991i
                   -3.  + 0.i
\end{lstlisting}





\section{Aufgabe J}
\textit{Geben Sie die Übertragungsfunktion des geschlossenen Regelkreises an. Was hat sich gegenüber der Übertragungsfunktion des ungeregelten Systems geändert und was nicht?}
 
\begin{lstlisting}[caption = Übertragungsfunktion des geschlossenen Regelkreises, captionpos = b, label = lst:example]
Gs_geschl = cT*inv(s*I-A+b*rT)*b
    
Ausgabe:
            80182.303 +461893.54s               
----------------------------------------------  
540000 +279000s +39675s^2 +2435s^3 +73s^4 +s^5 
\end{lstlisting}
\noindent Mit der Polvorgabe wird nur die letzte Zeile  der $A_{RNF}$ geändert, also nur der Nenner der Übertragungsfunktion von G(s), nicht der Zähler. Die Nullstellen werden daher nicht verschoben.


\clearpage
\section{Aufgabe K}
\textit{Geben Sie ein geeignetes Vorfilter für stationäre Genauigkeit als Proportionalelement KV an.}
 
\begin{lstlisting}[caption = Vorfilter, captionpos = b, label = lst:example]
Kv = inv(cT*(inv(-A+b*rT))*b)
    
Ausgabe:
6.7346532
\end{lstlisting}
\noindent 





\section{Aufgabe L}
\textit{Errechnen Sie die Sprungantwort h(t) des geschlossenen Kreises und das zugehörige Stellsignal u(t) mit dem Vorfilter aus k). Plotten Sie die zeitlichen Verläufe. Wie erklären Sie sich den Verlauf von h(t)? War die Wahl der Pole nach h) sinnvoll?
Interpretieren Sie die zeitlichen Verläufe von Übergangsfunktion und Stellsignal}
 
\begin{lstlisting}[caption = Sprungantwort h(t) des geschlossenen Kreises, captionpos = b, label = lst:example]
System=syslin('c',A-b*rT,b,cT) 
t=0:0.01:5
[v,x]=csim('step',t,System)
u=-rT*x+Kv*1; // Berechnung des Stellsignals
plot2d(t',[v',u'],[1,5])\end{lstlisting}

    \begin{figure}[!ht]
        \centering
        \includegraphics[width=0.8\linewidth]{images/AufgabeLPlot.png}
        \captionsetup{width=1.0\linewidth}
        \caption[Sprungantwort h(t) + Stellsignal u(t)]{Sprungantwort h(t) + Stellsignal u(t)}
        \label{fig:thkoeln} %\label used for referencing the figure in text
    \end{figure}


\noindent Die Polvorgabe ist noch nicht optimal, da die Nullstelle des Zählers noch nicht berücksichtigt und kompensiert wurde. Daher ist ein großes Überschwingen festzustellen. Durch das große Überschwingen der Sprungantwort muss der Einfluss des Stellsignals deutlich sinken, um die Sprungantwort auf den Sollwert zu regeln. Zu beobachten ist außerdem, dass das Stellsignal eine sehr große Verstärkung hat (im Bereich um 6), und die Sprungantwort hingegen sehr klein ist im stationären Endwert.
    




\section{Aufgabe M}
\textit{Berechnen Sie die Nullstelle sN der Übertragungsfunktion.}
 
\begin{lstlisting}[caption = Nullstelle sN der Übertragungsfunktion, captionpos = b, label = lst:example]
Null_sN = roots(80182.303 +461893.54*s)
    
Ausgabe:
-0.1735948
\end{lstlisting}
\noindent 






\section{Aufgabe N}
\textit{Geben Sie einen neuen Regelvektor nach Polvorgabe an. Die Pole des geschlossenen Kreises sollen jetzt sein: s1 = sN ; s2 = –15 ; s3,4 = –10 ± j10 ; s5 = –15}
 
\begin{lstlisting}[caption = Polvorgabe, captionpos = b, label = lst:example]
w2=[Null_sN;-15;-10+10*%i;-10-10*%i;-15]       
chPoly_w2=poly(w2,"s","roots")            
co_w2=coeff(chPoly_w2)'                   
    
r21=co_w2(1,1)-co_Arnf(1,1)
r22=co_w2(2,1)-co_Arnf(2,1)
r23=co_w2(3,1)-co_Arnf(3,1)
r24=co_w2(4,1)-co_Arnf(4,1)
r25=co_w2(5,1)-co_Arnf(5,1)
rTrnf2=[r21,r22,r23,r24,r25]
rT2 = rTrnf2 * Trnf    
    
Ausgabe:
rT2 = [0.097425, -0.8534467, 0.5133827, -0.7503678, 0.3257084]
\end{lstlisting}
\noindent 





\section{Aufgabe O}
\textit{Geben Sie wieder ein geeignetes Vorfilter für stationäre Genauigkeit als Proportionalelement KV an und berechnen Sie wieder die Sprungantwort des geschlossenen Kreises und das zugehörige Stellsignal u(t). Interpretieren Sie die zeitlichen Verläufe von Übergangsfunktion und Stellsignal und vergleichen Sie diese mit der Simulation aus l).}
 
\begin{lstlisting}[caption = Übertragungsfunktion des geschlossenen Regelkreises, captionpos = b, label = lst:example]
Kv2 = inv(cT*(inv(-A+b*rT2))*b)

System2=syslin('c',A-b*rT2,b,cT)
t2=0:0.01:5
[v2,x2]=csim('step',t2,System2)
u2=-rT2*x+Kv2*1
plot2d(t2',[v2',u2'],[1,5])

Ausgabe:
Kv2 = 0.0974250
\end{lstlisting}
\begin{figure}[!ht]
    \centering
    \includegraphics[width=0.8\linewidth]{images/AufgabeOPlot.png}
    \captionsetup{width=1.0\linewidth}
    \caption[Sprungantwort h(t) + Stellsignal u(t) + Vergleich zu Sim L)]{Sprungantwort h(t) + Stellsignal u(t)}
    \label{fig:thkoeln} %\label used for referencing the figure in text
\end{figure}

\noindent Nach der zweiten Polvorgabe ist bei der Sprungantwort kaum Überschwingen festzustellen. Wie aus der Literatur erwartet wurde die Nullstelle in der Übertragungsfunktion kompensiert und der Ausgang erreicht deutlich definierter seinen Endwert. Durch diese erneute Kompensation ist das benötigte Stellsignal deutlich geringer und die Sprungantwort hat eine deutliche Verstärkung erhalten.






\clearpage
\section{Aufgabe P}
\textit{Bestimmen Sie die Übertragungsfunktion des geschlossenen Kreises. Was hat sich im Vergleich zum ungeregelten System verändert?}
 
\begin{lstlisting}[caption = Übertragungsfunktionen der geschlossenen Regelkreise, captionpos = b, label = lst:example]
Gs = cT*inv(s*I-A)*b
Gs_geschl = cT*inv(s*I-A+b*rT)*b
Gs_geschl2 = cT*inv(s*I-A+b*rT2)*b
NullTest = roots(45000+10500*s+1025*s^2 +50*s^3 +s^4)
    
Ausgabe:
                          80182.303 +461893.54s                  
Gs =         -----------------------------------------------------  
             16968.573s +19024.465s^2 +1750.1608s^3 +11.74s^4 +s^5  

                          80182.303 +461893.54s               
Gs_geschl =  ----------------------------------------------  
             540000 +279000s +39675s^2 +2435s^3 +73s^4 +s^5 

                        461893.54               
Gs_geschl2 = ----------------------------------  
             45000 +10500s +1025s^2 +50s^3 +s^4 

NullTest =  -10. + 10.i      
            -10. - 10.i      
            -15. + 0.0000003i
            -15. - 0.0000003i\end{lstlisting}
\noindent Die Übertragungsfunktion des geschlossenen Regelkreises unterscheidet sich zu den anderen darin, dass der Zähler und der Nenner eine Nullstelle bei -0.1735948 haben. Dadurch ist im Zähler ebenfalls eine Veränderung festzustellen, obwohl dies eigentlich nicht sein sollte. Lässt man sich die Nullstellen des Nenners ausgeben, passen die restlichen Nullstellen zur Vorgabe.




\section{Aufgabe Q}
\textit{Viele der Zustandsgrößen seien nicht messbar, nur die Regelgröße x sei messbar. Entwerfen Sie einen Beobachter nach Polvorgabe, der die fehlenden Zustandsgrößen schätzt. Der Regelkreis habe die Pole gemäß Aufgabenpunkt n), wo sollten die Pole des Beobachters liegen?}
 

\noindent Die Pole des Beobachters sollen auf der realen Achse links von den Polen des geschlossenen Kreises in der s-Ebene liegen, damit der Beobachter schneller als der Kreis einschwingt.

\begin{lstlisting}[caption = Transformation zur BNF, captionpos = b, label = lst:example]
Qb = [cT; cT*A; cT*A^2; cT*A^3; cT*A^4];
cTbnf=[0,0,0,0,1];
inv_Qb=inv(Qb)
qb = clean(inv_Qb(:,5),1e-9);
Sbnf = clean([qb, A*qb, A^2*qb, A^3*qb, A^4*qb], 1e-9)  
Abnf=clean(inv(Sbnf)*A*Sbnf, 1e-9)
bbnf=clean(inv(Sbnf)*b, 1e-9)
chPoly_Abnf=det(s*I-Abnf);                     
co_Abnf=coeff(chPoly_Abnf)'
\end{lstlisting}





\section{Aufgabe R}
\textit{Ist die Strecke beobachtbar?}


\noindent Wenn der Rang gleich der Anzahl an Spalten in der Matrix ist Beobachtbar n = 5.
\begin{lstlisting}[caption = Prüfung der Beobachtbarkeit, captionpos = b, label = lst:example]
rank(Qb)

Ausgabe:
5
\end{lstlisting}






\section{Aufgabe S}
\textit{Die Pole des Beobachters sollen sein: sB1 = –20 ; sB2 = –20 ; sB3 = –25 ; sB4 = –25 ; sB5 = –30 Bestimmen Sie den notwendigen Beobachtervektor l.}
 
\begin{lstlisting}[caption = Polvorgabe BNF, captionpos = b, label = lst:example]
wbnf=[-20;-20;-25;-25;-30]             
chPoly_wbnf=poly(wbnf,"s","roots")              
co_wbnf=coeff(chPoly_wbnf)'                     
l1=co_wbnf(1,1)-co_Abnf(1,1)                         
l11=co_wbnf(2,1)-co_Abnf(2,1)
l12=co_wbnf(3,1)-co_Abnf(3,1)
l13=co_wbnf(4,1)-co_Abnf(4,1)
l14=co_wbnf(5,1)-co_Abnf(5,1)
lwbnf=[l1;l11;l12;l13;l14]                          
l=Sbnf*lwbnf

Ausgabe:
l = [108.26000; 507.29208; 612.78377; 108.31148; -11.699249]
\end{lstlisting}






\section{Aufgabe T}
\textit{Machen Sie die Probe. Wo liegen die Pole des Beobachters?}
 
\begin{lstlisting}[caption = Pole des Beobachters, captionpos = b, label = lst:example]
chPolyBnf = det(s*I-A+l*cT)
NullBeob = roots(chPolyBnf)

Ausgabe:
NullBeob = -30.000008 + 0.i       
           -25.       + 0.0078892i
           -25.       - 0.0078892i
           -19.999996 + 0.0031844i
           -19.999996 - 0.0031844i
\end{lstlisting}










\clearpage
\printbibliography
\end{document}
